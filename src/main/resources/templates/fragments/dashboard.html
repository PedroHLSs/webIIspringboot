<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:fragment="dashboard-head">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <link rel="stylesheet" th:href="@{/css/dash.css}">
</head>

<body>
    <div th:fragment="sidebar" id="sidebar-wrapper" class="d-flex flex-column custom-sidebar">
        <div class="sidebar-header p-3 text-center">
            <h5 class="text-white">ðŸ“š Biblioteca</h5>
        </div>
        <ul class="nav flex-column sidebar-nav p-0 w-100">
            <!-- Livros - Todos podem ver -->
            <li class="nav-item">
                <a th:href="@{/livros}" class="nav-link active">
                    <i class="fas fa-book-open me-2"></i> GerÃªncia de Livros
                </a>
            </li>
            
            <!-- EmprÃ©stimos - Todos podem ver -->
            <li class="nav-item">
                <a th:href="@{/emprestimo}" class="nav-link">
                    <i class="fas fa-cart-plus me-2"></i> GerÃªncia de EmprÃ©stimos
                </a>
            </li>
            
            <!-- Multas - Todos podem ver (Aluno vÃª apenas suas multas) -->
            <li class="nav-item">
                <a th:href="@{/multas}" class="nav-link">
                    <i class="fas fa-hand-holding-dollar me-2"></i> GerÃªncia de Multas
                </a>
            </li>
            
            <!-- Autores - Apenas Professor e Admin -->
            <li class="nav-item" sec:authorize="hasAnyAuthority('Professor', 'Admin')">
                <a th:href="@{/autores}" class="nav-link">
                    <i class="fas fa-pen-to-square me-2"></i> Autores
                </a>
            </li>
            
            <!-- UsuÃ¡rios - Apenas Admin -->
            <li class="nav-item" sec:authorize="hasAuthority('Admin')">
                <a th:href="@{/usuarios}" class="nav-link">
                    <i class="fas fa-users-gear me-2"></i> GerÃªncia de UsuÃ¡rios
                </a>
            </li>
        </ul>
        
        <div class="mt-auto p-3">
             <form th:action="@{/logout}" method="post" class="w-100">
                <button type="submit" class="btn btn-outline-light w-100">
                    <i class="fas fa-sign-out-alt me-2"></i> Sair
                </button>
            </form>
        </div>
    </div>
    <div th:fragment="dashboard-scripts">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
            crossorigin="anonymous"></script>
        <script>
            // Script para alternar a visibilidade da sidebar
            document.addEventListener('DOMContentLoaded', function () {
                const sidebar = document.getElementById('sidebar-wrapper');
                const toggleButton = document.getElementById('sidebarToggle');

                if (toggleButton) {
                    toggleButton.addEventListener('click', function () {
                        sidebar.classList.toggle('active');
                    });
                }
            });
        </script>
    </div>

</body>
</html>